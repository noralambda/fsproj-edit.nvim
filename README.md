# fsproj-edit.nvim

Quickly make changes to the associated fsproj. Want to reorder this file.fs? No problem. Create a new file in a sub folder and place it bellow a specific file in the compilation order? Please do.

## Installation

Requires [html-tidy](https://www.html-tidy.org/). Make sure it is installed in your system.
- Used when reading fsproj. The xml library([slaxml](https://github.com/Phrogz/SLAXML)) we are using to parse fsproj struggles with .fsproj generated by templates and others. Using regex to edit the contents is feasible, feel free to contribute or wait until I have time to spare.
- Tidy is also used to format after editing the .fsproj.

Install using packer or your preferred plugin manager.
```lua
use { "noralambda/fsproj-edit.nvim",
      requires = { 'nvim-lua/plenary.nvim' } }
```

## Usage

You need to call setup before using. At the momment its optional but some planned features might require it.
```lua
require 'fsproj-edit'.setup({})
```

This is the current default setup. Don't bother if you are not changing anything.
```lua
require 'fsproj-edit'.setup({
  tidy = {
    --- html-tidy program path. Just the program path. No args.
    program = "tidy", },
})
```

This plugin does not create commands, just functions you can bind.


```lua
local fsproj_edit = require 'fsproj-edit'

-- Can be called anywhere. You'll be asked which fsproj from the repo to insert.
-- Before creating you pick a file in a fsproj to create above or bellow
fsproj_edit.create_file_below_file
fsproj_edit.create_file_above_file

-- Change the compilation order of file in its fsproj.
-- You select which other file in the project this new file should be then placed below or above.
fsproj_edit.move_this_file_below
fsproj_edit.move_this_file_above

-- Rename the file in the disk and on fsproj it is part of.
-- Can also be used to move, if you give another path. Will create subdirs when needed.
fsproj_edit.rename_this_file

-- Remove file from fsproj it is part of
fsproj_edit.remove_this_file

-- Delete the buffer, remove file from fsproj and then delete from disk
fsproj_edit.delete_this_file
```


Example of mappings:
```lua
local fsproj_edit = require 'fsproj-edit'
vim.keymap.set({ 'n' }, '<leader>pc', fsproj_edit.create_file_below_file)
vim.keymap.set({ 'n' }, '<leader>pC', fsproj_edit.create_file_above_file)
vim.keymap.set({ 'n' }, '<leader>pm', fsproj_edit.move_this_file_below)
vim.keymap.set({ 'n' }, '<leader>pM', fsproj_edit.move_this_file_above)
vim.keymap.set({ 'n' }, '<leader>pr', fsproj_edit.rename_this_file)
vim.keymap.set({ 'n' }, '<leader>px', fsproj_edit.remove_this_file)
vim.keymap.set({ 'n' }, '<leader>pd', fsproj_edit.delete_this_file)

-- To only bind in fsharp files, use {buffer=true}
-- and place the bindings in your-vim-config/after/ftplugin/fsharp.lua
vim.keymap.set({ 'n' }, '<leader>pd', fsproj_edit.delete_this_file, {buffer=true})
```



## License
  This project is license under MIT

  Third party code included:
  - [slaxml](https://github.com/Phrogz/SLAXML)

